# 프론트엔드 아키텍처

이 기획서는 **실시간 컴퓨팅 자원 모니터링 웹앱의 프론트엔드 시스템**에 대한 상세 기획서입니다.

---

## 1. 상세 작업 목록 (Tasks)

[✅] **프로젝트 초기 설정**
  - [✅] `Vite` + `React` + `TypeScript` 템플릿으로 프로젝트 생성
  - [✅] 주요 라이브러리 설치 (`zustand`, `react-grid-layout`, `recharts`, `axios`)

[✅] **전역 상태 관리 (`Zustand` Store) 설계**
  - [✅] `systemResourceStore` 정의: CPU, RAM 등 실시간 데이터 저장
  - [✅] `dashboardStore` 정의: 위젯 레이아웃, 위젯 목록 등 UI 상태 저장
  - [✅] 각 Store에 필요한 `Action` 함수 정의 (예: `setCpuUsage`, `updateLayout`)

[✅] **서비스 모듈 설계**
  - [✅] **WebSocket 서비스**: 연결/재연결, 메시지 수신 후 `systemResourceStore` 업데이트 로직 구현
  - [✅] **API 서비스 (`axios`)**: 백엔드 API 통신 인스턴스 생성, `getLayout`, `saveLayout` 함수 구현

[✅] **핵심 컴포넌트 상세 설계**
  - [✅] **`Dashboard` 컴포넌트**:
    - [✅] `react-grid-layout` 라이브러리와 `dashboardStore` 연동
    - [✅] Store의 레이아웃 상태에 따라 `WidgetContainer` 동적 렌더링
    - [✅] 드래그/드롭 종료 시 `saveLayout` API 호출
  - [✅] **`WidgetContainer` 컴포넌트**:
    - [✅] 위젯 제목, 설정 아이콘 등 공통 UI 구현
    - [✅] 위젯 타입에 따라 `CpuWidget`, `RamWidget` 등 적절한 자식 컴포넌트 렌더링
  - [✅] **개별 위젯 (`CpuWidget` 등)**:
    - [✅] `systemResourceStore` 구독
    - [✅] `Recharts`를 사용하여 수신 데이터를 실시간 그래프로 시각화

[✅] **라우팅 설계 (`react-router-dom`)**
  - [✅] `/` 경로에 `Dashboard` 페이지를 렌더링하도록 라우터 설정

---

## 2. 연관 기획서

- `[:Parent:]` `프로젝트_메인기획.md`

## 3. 프론트엔드 시스템 다이어그램

```mermaid
graph TD
    subgraph "Frontend (React)"
        A["App.js (애플리케이션 진입점)"] --> B{WebSocket 연결 관리자}
        A --> C{라우터}
        
        C -- "/" --> D[대시보드 페이지]
        D --> E{대시보드 레이아웃 관리자<br/>(react-grid-layout)}
        E -- "위젯 렌더링" --> F[위젯 컨테이너]
        
        B -- "수신 데이터 전파" --> G[전역 상태 관리자 (Zustand/Redux)]
        G -- "상태 제공" --> F
        F -- "필요한 데이터 전달" --> H{개별 위젯<br/>(CPU, RAM 등)}
        
        H -- "실시간 데이터 시각화" --> I[차트 라이브러리<br/>(Recharts, etc.)]
        E -- "레이아웃 변경" --> J[API 호출 로직]
        J -- "서버에 레이아웃 저장" --> K[("Backend API")]
    end

    style G fill:#cff,stroke:#333,stroke-width:2px
    style E fill:#f9f,stroke:#333,stroke-width:2px
```

## 4. 컴포넌트 구조

| 컴포넌트                | 주요 책임                                           | 설명                                                                                             |
| :---------------------- | :-------------------------------------------------- | :----------------------------------------------------------------------------------------------- |
| `Dashboard`             | 위젯들의 그리드 레이아웃을 관리                     | `react-grid-layout` 같은 라이브러리를 사용하여 위젯의 드래그앤드롭, 크기 조정을 처리합니다.           |
| `WidgetContainer`       | 위젯의 공통적인 틀(Frame)을 제공                    | 모든 위젯이 공통으로 사용할 제목 표시줄, 설정 버튼, 테두리 등을 포함합니다.                        |
| `CpuWidget`, `RamWidget` | 특정 자원에 대한 데이터를 시각화                    | WebSocket을 통해 받은 실시간 데이터를 차트나 그래프 형태로 표시합니다.                           |
| `WidgetRenderer`        | 위젯 타입에 따라 적절한 위젯 컴포넌트를 렌더링      | 대시보드 설정에 따라 동적으로 필요한 위젯을 화면에 표시하는 역할을 합니다.                       |

## 5. 상태 관리

- **전역 상태**: WebSocket을 통해 수신되는 실시간 자원 데이터, 대시보드 레이아웃 설정 등은 **Zustand** 또는 **Redux Toolkit** 같은 전역 상태 관리 라이브러리를 사용합니다.
- **지역 상태**: 각 위젯 내부의 UI 상태(예: 설정 메뉴 표시 여부)는 `useState`를 사용하여 관리합니다.

## 6. 데이터 흐름

1.  애플리케이션 시작 시, WebSocket 연결을 수립합니다.
2.  백엔드 `monitoring` 모듈은 주기적으로 시스템 자원 데이터를 `websockets` 허브로 전송합니다.
3.  허브는 연결된 모든 프론트엔드 클라이언트에게 데이터를 브로드캐스트합니다.
4.  프론트엔드의 WebSocket 관리자는 데이터를 수신하여 전역 상태를 업데이트합니다.
5.  전역 상태 변경에 따라, 해당 데이터를 구독하는 위젯들이 리렌더링되어 화면이 실시간으로 업데이트됩니다. 